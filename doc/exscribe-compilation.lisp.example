;;;; -*- Lisp -*- ; Example on how I compiled Exscribe with XCVB. ;;;;

;;; After I converted Exscribe from ASDF to XCVB
;;; as described in exscribe-migration.lisp.example,
;;; I could compile it as follows:
; export BUILD_DIR=~/fare/lisp/exscribe
; xcvb doc/exscribe-migration.lisp.example
; make -C $BUILD_DIR 


(in-package :xcvb)

;;; This is for my own debugging purposes.
#+commenting-this-line-enables-the-trace
(trace write-makefile get-lisp-implementation)

(define-lisp-implementation :test () :fullname "Test!")

(get-lisp-implementation :test)

(get-lisp-implementation :sbcl)


;;; sbrody documented creating an image manually... we'll automate that.
; ... Create an image with the setup loaded ... (see load-setup-and-die)
;; the path to the image you dumped in
(setf xcvb:*lisp-executable-pathname*
      "sbcl --noinform")
;; This one fails because we misquote.
;      "sbcl --noinform --eval '(pushnew \"/home/fare/lib/lisp-system/\" asdf:*central-registry*)'")

(defvar *build-dir* "/home/fare/fare/lisp/exscribe/")

(write-makefile *build-dir*)

; ... make -f /ita/devel/qres/lisp/quux/Makefile.xcvb lisp.image ...
