;;;; -*- Lisp -*- ; Example on how I compiled Exscribe with XCVB. ;;;;

;;; After I converted Exscribe from ASDF to XCVB
;;; as described in exscribe-migration.lisp.example,
;;; I could compile it as follows:
; xcvb doc/exscribe-migration.lisp.example
; make -C /home/fare/fare/lisp/exscribe -f xcvb.mk

(in-package :xcvb)

;;; This is for my own debugging purposes.
#+commenting-this-line-enables-the-trace
(trace write-makefile get-lisp-implementation)

;;; You may want to set parameters such as this one and others in specials.lisp
;(setf *lisp-implementation-type* :sbcl)
;(setf *lisp-executable-pathname* "/usr/local/bin/sbcl")
;(setf *lisp-image-pathname* "/path/to/my/monster-sbcl.core")
;(setf *lisp-options* '("--dynamic-space-size" "3192"))
;(setf *use-cfasls* t)


;;;; Not for stuff that's specific to the project.
;;; First, let's use the same setup file as used by cl-launch.
;;; Importantly, setup.lisp will set the asdf:*central-registry*
(setf *lisp-setup-dependencies*
      '((:asdf "cl-launch") ;; Required by setup.lisp
	(:load-source "setup.lisp")))

;;;; And now, let's just do it!
(defvar *build-dir* #p"/home/fare/fare/lisp/exscribe/") ;; Mind the trailing /
(write-makefile *build-dir*)
